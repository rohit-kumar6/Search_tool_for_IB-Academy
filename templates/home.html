{% extends "layout.html" %}

{% block body %}
    <br /><br />
    <div class="container">
        <div class="row">
            <div class="col-sm-12" >
                <br /><br />
                <label> <strong> Search </strong> </label>
                <form autocomplete="off">
                    <input type="text" name="query" id="query_input" class="form-control" placeholder="Search for problems" />
                </form>
            </div>
        </div>
    </div>

    <div class="container">
        <br><br>
        <div id="search_result" class="panel-group">
            <div class="panel panel-default" style="margin-top: 0; border-radius: 0">
                <div class="panel-body" style="padding: 10px 15px;">
                    <div>
                        <a style="text-decoration:none" href="#">No result Found </a>
                    </div>
                </div>
            </div>  
        </div>
    </div>
{% endblock body %}

{% block script %} 
    <script>
        $(document).ready(function(){
            var typingTimer;                //timer identifier
            var doneTypingInterval = 250;  //time in ms (0.25  seconds)
            $('#query_input').keyup(function(){
                clearTimeout(typingTimer)
                if($('#query_input').val()){
                    typingTimer = setTimeout(doneTyping, doneTypingInterval)
                }
            });

            function doneTyping()
            {
                var query_val = $('#query_input').val();
                console.log(query_val)
                req = $.ajax({
                    url: '/find',
                    type: 'POST',
                    data: {query:query_val},
                });

                req.done(function(data){
                    // $('#search_result').fadeOut().fadeIn();
                    $('#search_result').html(data);
                });
            }
        });
    </script>
{% endblock script%}